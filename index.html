<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VÃ­ CÃ´ TiÃªn - ThÃªm Token</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #222;
            color: white;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 { color: #ff9800; }
        button {
            background-color: #ff9800;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover { background-color: #e68a00; }
        #wallet-address { margin-top: 10px; }
    </style>
</head>
<body>
    <h1>VÃ­ CÃ´ TiÃªn</h1>
    <button onclick="connectWallet()">ğŸ”— Káº¿t ná»‘i vÃ­</button>
    <button onclick="addAllTokens()">ğŸ”„ Chuyá»ƒn Polygon & ThÃªm Token</button>
    <div id="wallet-address"></div>

    <script>
        let userAddress = "";

        // ğŸŸ¢ Káº¿t ná»‘i vÃ­ MetaMask
        async function connectWallet() {
            if (typeof window.ethereum !== "undefined") {
                try {
                    const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
                    userAddress = accounts[0];
                    document.getElementById("wallet-address").innerText = `VÃ­: ${userAddress}`;
                    console.log("ÄÃ£ káº¿t ná»‘i vÃ­:", userAddress);
                } catch (error) {
                    console.error("Lá»—i káº¿t ná»‘i vÃ­:", error);
                    alert("Lá»—i káº¿t ná»‘i vÃ­!");
                }
            } else {
                alert("Vui lÃ²ng cÃ i Ä‘áº·t MetaMask!");
            }
        }

        // ğŸ”„ Chuyá»ƒn máº¡ng Polygon
        async function switchToPolygon() {
            if (window.ethereum) {
                try {
                    await window.ethereum.request({
                        method: "wallet_switchEthereumChain",
                        params: [{ chainId: "0x89" }], // 0x89 = 137 (Polygon Mainnet)
                    });
                    console.log("ÄÃ£ chuyá»ƒn sang máº¡ng Polygon!");
                } catch (error) {
                    console.error("Lá»—i khi chuyá»ƒn máº¡ng:", error);
                    alert("Vui lÃ²ng thÃªm máº¡ng Polygon vÃ o MetaMask!");
                }
            } else {
                alert("Vui lÃ²ng cÃ i Ä‘áº·t MetaMask!");
            }
        }

        // ğŸ† ThÃªm token vÃ o MetaMask (KhÃ´ng cÃ³ logo)
        async function addTokenToMetaMask(tokenAddress, tokenSymbol, tokenDecimals) {
            if (typeof window.ethereum !== "undefined") {
                try {
                    const wasAdded = await window.ethereum.request({
                        method: "wallet_watchAsset",
                        params: {
                            type: "ERC20",
                            options: {
                                address: tokenAddress,
                                symbol: tokenSymbol,
                                decimals: tokenDecimals
                            },
                        },
                    });

                    if (wasAdded) {
                        console.log(`âœ… Token ${tokenSymbol} Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o MetaMask!`);
                    } else {
                        console.log(`â›” NgÆ°á»i dÃ¹ng tá»« chá»‘i thÃªm token ${tokenSymbol}`);
                    }
                } catch (error) {
                    console.error("Lá»—i khi thÃªm token:", error);
                }
            } else {
                alert("Vui lÃ²ng cÃ i Ä‘áº·t MetaMask!");
            }
        }

        // ğŸš€ Chuyá»ƒn máº¡ng & ThÃªm táº¥t cáº£ token
        async function addAllTokens() {
            await switchToPolygon(); // Chuyá»ƒn sang máº¡ng Polygon trÆ°á»›c
            await addTokenToMetaMask("0x0d4013b4e2e2f89171bbe956da995757fb5a6678", "COT", 18);
            await addTokenToMetaMask("0x1d7e521627cc4955ac8df6fe2fcb45891d0f30b7", "PIX", 18);
            await addTokenToMetaMask("0xe7d8c8818106a565980315675d7adcb1d8ab1318", "TIN", 18);
        }
    </script>
</body>
</html>
